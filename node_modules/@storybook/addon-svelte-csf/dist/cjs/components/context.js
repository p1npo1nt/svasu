import { getContext, hasContext, setContext } from "svelte";
const CONTEXT_KEY = "storybook-registration-context";
export function createRenderContext(props = {}) {
  setContext(CONTEXT_KEY, {
    render: true,
    register: () => {},
    meta: {},
    args: {},
    ...props
  });
}
export function createRegistrationContext(repositories) {
  setContext(CONTEXT_KEY, {
    render: false,
    register: story => {
      repositories.stories.push(story);
    },

    set meta(value) {
      // eslint-disable-next-line no-param-reassign
      repositories.meta = value;
    },

    args: {}
  });
}
export function useContext() {
  if (!hasContext(CONTEXT_KEY)) {
    createRenderContext();
  }

  return getContext(CONTEXT_KEY);
}